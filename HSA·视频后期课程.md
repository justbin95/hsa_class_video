# HSA·视频后期课程

[TOC]

## 第一章 基础知识

### 一、视频的属性（参数）

我们都知道，计算机上每一个文件，都会有其自己的属性（参数），比如图片文件的分辨率、音乐文件的码率等等。当然，每一个视频，也都会有其参数。我们在播放器的视频属性中，可以看到类似以下信息。

> 前方到站 海宁.mp4
> 容器：MPEG-4
> 总码率：64.0 Mb/s
> 大小：1.26 GiB
> 时长：2 min 48 s 560 ms
>
> 视频(1)：AVC
> Profile：High@L5.1
> 码率：63.8 Mb/s
> 文件大小：1.25 GiB (100%)
> 分辨率：3840x1634
> 画面比例：2.35:1(2.350)
> 像素宽高比：1.000
> 帧率：25.000 FPS
> 色彩空间：YUV
> 色度抽样：4:2:0
> 位深度：8 bits
> 扫描方式：逐行扫描
> 总帧数：4214
>
> 音频(2)：AAC
> 大小：3.90 MiB (0%)
> 码率：192 kb/s
> 采样率：48.0 kHz
> 声道数：2

我们选择常见的几项进行讲解。

#### 1、分辨率及画面比例

> 分辨率：3840x1634
> 画面比例：2.35:1(2.350)
> 像素宽高比：1.000

** 分辨率： **视频一个画面（一帧）中像素点的数量。例如1920x1080即为每行有1920个像素点，每列有1080个像素点。

**不考虑其他因素，分辨率越高，视频越清晰。**

**像素宽高比：**每个像素点的宽与高的比值，常见的视频大多为方形像素，即像素宽高比为1。

**画面比例：**视频的宽高比，与视频分辨率和像素宽高比有关。计算公式为：
$$
画面比例=\frac{横向分辨率}{纵向分辨率}\times像素宽高比
$$

#### 2、帧率

> 帧率：25.000 FPS

**帧：**视频中最小单位的单幅画面，相当于电影胶片上的每一格镜头。 一帧就是一幅静止的画面，视频即由连续的帧构成。

**帧率：**每秒内帧的数量。FPS: Frames Per Second. 常见的帧率有：24，25，29.97，30，48，50，59.94，60，100，120等。

**不考虑其他因素，帧率越高，视频越流畅。**

- **Tips：**由于我国使用的时50Hz的交流电，所以平时拍摄视频**建议使用25帧及其倍数**（例如50、100帧）帧率，室内快门速度**使用1/50s的倍数**（例如1/100，1/200），防止拍到灯的频闪。
  在电影拍摄中，一般使用24帧及其倍数。

#### 3、扫描方式（场序）

> 扫描方式：逐行扫描

扫描方式即每帧画面的展现方式，分为逐行扫描(p)和隔行扫描(i)。我们常说的720p，1080p都为逐行扫描。

##### 逐行扫描(p)

逐行扫描是互联网常见的扫描方式。

以1920x1080p50帧的视频为例，每次从上至下依次扫描共1080行，每秒共50次。

<img src="https://gitee.com/justbin95/markdown_pic/raw/master/img/%E9%80%90%E8%A1%8C%E6%89%AB%E6%8F%8F.png" alt="逐行扫描" style="zoom:50%;" />

##### 隔行扫描(i)

*注：隔行扫描仅需了解，基本不使用。*

隔行扫描是广播电视行业常用的扫描方式，一般不适用于网络传播。

以1920x1080i50上场优先的视频为例，第一场（上场）从上至下分别扫描1，3，5，7，... 1079的奇数行，第二场（下场）从上至下分别扫描2，4，6，8，... 1080的偶数行。每一场只有一半画面，节省了数据量。

<img src="https://gitee.com/justbin95/markdown_pic/raw/master/img/%E9%9A%94%E8%A1%8C%E6%89%AB%E6%8F%8F.png" alt="隔行扫描" style="zoom:50%;" />

可见，1080p50相比1080i50多了一倍的数据量，所以电视台为了节省频道带宽，多选用隔行扫描的方式传输节目。但网络传输如果使用隔行视频时，容易出现画面撕裂的情况，**故我们尽量使用逐行来制作视频。**

#### 4、码率

> 码率：63.8 Mb/s

码率即每秒视频的数据量，常用Mbps表示（Mbit/s）
$$
1MB\leftrightarrows1MByte=8Mbit
$$

$$
1Mbit=1024Kbit
$$

**不考虑其他因素，码率越高，文件越大，视频越清晰。更高的分辨率和帧率需要更高的码率来支撑。**

一般视频的分辨率码率对照表，此表仅供参考，码率为在清晰度与文件大小间权衡的最佳结果。

| 分辨率         | 帧率 | 码率(Mbps) |
| -------------- | ---- | ---------- |
| 1280x720       | 25   | 3-5        |
| 1920x1080      | 25   | 8-12       |
| 1920x1080      | 50   | 16-20      |
| 3840x2160 (4K) | 25   | 32-50      |

由此可见，分辨率增加为原来的4倍（4K较1080p，横向和纵向分辨率都为2倍，因此总像素为4倍），码率也需增加4倍；帧率翻倍，码率也需翻倍。

#### 5、编码

所谓视频编码方式，就是指通过压缩技术，将原始视频格式的文件转换成另一种视频格式文件的方式。

常见编码格式有：H.264，H.265(HEVC)；ProRes，CineForm等。

| 压缩方式 | 编码格式              | 优点             | 缺点                         |
| -------- | --------------------- | ---------------- | ---------------------------- |
| 帧间编码 | H.264，H.265(HEVC)... | 文件小，播放流畅 | 剪辑时容易卡顿               |
| 帧内编码 | ProRes，CineForm...   | 剪辑流畅         | 文件很大，播放器直接播放会卡 |

*注：压缩方式仅需了解，民用级设备（包括单反、手机、无人机等）均只提供帧间编码格式的视频拍摄。在剪辑时，将帧间编码的素材转换为帧内编码，作为代理剪辑，能有效提升剪辑效率。*

- **Tips：**我们平时剪辑视频导出一般使用H.264编码格式。H.265是新一代的编码格式，同样画质下笔H.264文件量小接近一半，但是在一些较旧的设备上播放容易卡顿，目前来说尽量避免使用。



